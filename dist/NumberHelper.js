"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _ErrorHelper=_interopRequireDefault(require("./ErrorHelper")),_TypeHelper=_interopRequireDefault(require("./TypeHelper"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var NumberHelper=function(){function g(){}return g.parse=function(e){if(!e)return 0;switch(_typeof(e)){case"number":return Number(e);case"string":return 0<=(e=e.replace(/,/g,"")).indexOf(".")?parseFloat(e):parseInt(e,10);default:throw _ErrorHelper.default.argument("value","值必须是字符串或者数值。")}},g._isNumberFormat=function(e){return-1!==e.indexOf("0")||-1!==e.indexOf("#")},g._getNumberFormat=function(e){if(!e)return null;var r=e.indexOf("0"),t=e.indexOf("#");if((-1===r||-1!==t&&t<r)&&(r=t),r<0)return null;var n=e.lastIndexOf("0"),u=e.lastIndexOf("#");(-1===n||-1!==u&&n<u)&&(n=u);var a=e.lastIndexOf(".");return{begin:r,end:n,digits:a=0<a?n===u?6:n-a:0,format:e.substring(r,n+1)}},g._pad=function(e,r,t){var n=r-e.length;if(0<n){for(var u="";n;)n-=1,u+="0";return t?e+u:u+e}return e},g._doFormatNumber=function(e,r){e=Math.abs(e);var t=-1!==r.indexOf(","),n=r.split("."),u=(n[0]||"").replace(g._clearRegExp,""),a=(n[1]||"").replace(g._clearRegExp,""),o="",i=u.indexOf("0");u=-1===i?"0":u.substr(i)||"0";var f=a.length,l=a.substr(0,a.lastIndexOf("0")+1).length;e=g.round(e,f);var p=String(e).split("."),s=p[0],d=p[1]||"";if(s){if(s=g._pad(s,u.length),t)for(var c=0;c<Math.floor((s.length-(1+c))/3);c++)s=s.substring(0,s.length-(4*c+3))+","+s.substring(s.length-(4*c+3));o+=s}return 0<f&&(o+=".",o+=g._pad(d.substr(0,f),l,!0)),o},g.round=function(e,r){if(void 0===r&&(r=0),isNaN(e))return 0;var t;if(_TypeHelper.default.isNumber(r)?r<0&&(r=0):r=0,e<0&&(t=!0,e=0-e),0===r)e=Math.round(e);else{var n=Math.pow(10,r);e*=n,e=Math.round(e),e/=n}return t?0-e:e},g.unround=function(e,r){var t;if(void 0===r&&(r=0),isNaN(e))return 0;if(r=r||0,0===e)return 0;var n=e.toString();return r+(t=n.indexOf("."))<n.length?e:parseFloat(n.substr(0,t+r))},g.calculate=function(e,r,t,n){if(void 0===n&&(n=2),n||0===n||(n=6),e=e?"number"==typeof e?e.toString():e.replace(g._zeroRegex,""):0,r=r?"number"==typeof r?r.toString():r.replace(g._zeroRegex,""):0,!e||!r)switch(t){case"+":return g.parse(e||r);case"-":return e?g.parse(e):0-g.parse(r);default:return 0}var u,a,o,i,f=e.indexOf(".");return 0<f?(u=e.length-f-1,e=e.replace(".","")):u=0,0<(f=r.indexOf("."))?(a=r.length-f-1,r=r.replace(".","")):a=0,e=parseInt(e,10),r=parseInt(r,10),"+"===t||"-"===t?(o=(o=u-a)<0?(e*=Math.pow(10,0-o),a):(0<o&&(r*=Math.pow(10,o)),u),i="+"===t?e+r:e-r,n<o?i=Math.round(i/Math.pow(10,o-n)):n=o):i="*"===t?(o=u+a,i=e*r,Math.round(i/Math.pow(10,o-n))):a+n<u?Math.round(e/r/Math.pow(10,u-a-n)):u<a+n?Math.round(e*Math.pow(10,a+n-u)/r):Math.round(e/r),0===n?i:i/Math.pow(10,n)},g.format=function(e,r){if(!1===_TypeHelper.default.isNumber(e)){if(!e)return"";if(!r)return String(e);e=g.parse(e)}if(!r)return e.toString();var t=r.split(";"),n=e<0;r=t[0],n&&2<=t.length&&(r=t[1]),0===e&&3<=t.length&&(r=t[2]);var u=-1!==r.indexOf("%"),a=g._isNumberFormat(r);e=u?100*Number(e):Number(e);var o=g._eRegExp.exec(r);if(o){var i=parseInt(o[2],10);return isNaN(i)?e.toExponential():e.toExponential(i)}if(!a)return r;var f="",l=g._getNumberFormat(r);return f=null!==l?(f=g._doFormatNumber(e,l.format),n&&(f="-"+f),r.substr(0,l.begin)+f+r.substr(l.end+1)):r},g._eRegExp=/^(e)(\d*)$/i,g._clearRegExp=/[^0#]/g,g._zeroRegex=/(,)|([0|.]*$)/g,g}(),_default=NumberHelper;exports.default=_default;
//# sourceMappingURL=NumberHelper.js.map
