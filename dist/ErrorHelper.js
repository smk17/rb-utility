"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _ConsoleHelper=_interopRequireDefault(require("./ConsoleHelper")),_StringBuilder=_interopRequireDefault(require("./StringBuilder")),_StringHelper=_interopRequireDefault(require("./StringHelper")),_Environment=_interopRequireDefault(require("./Environment")),_JsonHelper=_interopRequireDefault(require("./JsonHelper")),_Localize=_interopRequireDefault(require("./Localize")),_IUtilityTypes=require("./IUtilityTypes");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,r,n){return r&&_defineProperties(e.prototype,r),n&&_defineProperties(e,n),e}var ErrorHelper=function(){function o(){_classCallCheck(this,o)}return _createClass(o,null,[{key:"__printExceptionTo",value:function(e,r){r.appendLine("异常类型：",e.name).appendLine("异常消息：",e.message),e.stack&&r.appendLine("堆栈信息：").appendLine(e.stack),e.data&&r.appendLine("异常数据：").appendLine(_JsonHelper.default.toJson(e.data)),e.innerException&&(r.append("内部异常："),o.__printExceptionTo(e.innerException,r))}},{key:"__printException",value:function(e){if("BusinessException"===e.name)return e.message;var r=new _StringBuilder.default;return o.__printExceptionTo(e,r),r.toString()}},{key:"_errorArgument",value:function(e,r,n){var t="Argument"+e+"Exception";return r&&(n+="\n"+_Localize.default.to("参数名：{0}。",r)),o.create(t,n,"",null,{paramName:r})}},{key:"_error",value:function(e,r){return o.create(e+"Exception",r,"")}},{key:"create",value:function(e,r,n,t,o){var a=new Error;return a.name=e,a.message=r,n&&(a.stack=n),t&&(a.innerException=t),o&&(a.data=o),a}},{key:"argument",value:function(e,r){return o._errorArgument("",e,r||"值并不在预期的范围内。")}},{key:"argumentNull",value:function(e,r){return o._errorArgument("Null",e,r||"值不能为null。")}},{key:"argumentOutOfRange",value:function(e,r,n){var t=n||"值在有效范围之外。";return e&&(t+="\n"+_StringHelper.default.format("参数名：{0}。",e)),null!=r&&(t+="\n"+_StringHelper.default.format("实际值是：{0}。",r)),o.create("ArgumentOutOfRangeException",t,"",null,{paramName:e,actualValue:r})}},{key:"argumentUndefined",value:function(e,r){return o._errorArgument("Undefined",e,r||"值不能为未定义。")}},{key:"format",value:function(e){return o._error("Format",e||"一个无效的格式。")}},{key:"invalidOperation",value:function(e){return o._error("InvalidOperation",e||"一个无效的操作。")}},{key:"notImplemented",value:function(e){return o._error("NotImplemented",e||"当前方法或操作没有实现。")}},{key:"notSupported",value:function(e){return o._error("NotSupported",e||"不支持当前操作。")}},{key:"parameterCount",value:function(e){return o._error("ParameterCount",e||"参数个数不匹配。")}},{key:"configException",value:function(e){return o._error("Config",e||"配置异常。")}},{key:"systemException",value:function(e){return o._error("System",e||"操作失败，请联系系统管理员！")}},{key:"userException",value:function(e){return o._error("User",e)}},{key:"passException",value:function(){return o._error("Pass","用于终止后面的操作。")}},{key:"isPassException",value:function(e){return e&&e.constructor===Error&&"PassException"===e.name}},{key:"disposeThrowPass",value:function(e){if("PassException"===e.name)throw e;throw o.dispose(e),o.passException()}},{key:"dispose",value:function(e){if(e)switch(e.name){case"PassException":return;case"BusinessException":case"UserException":switch(e.type){case"ReferencedDataException":var r=e.referencedDatas;5<r.length&&(r[5]="等"),_ConsoleHelper.default.error(e.message+"-被使用的数据："+r.join("，"));break;default:_ConsoleHelper.default.log(e.message)}break;case"ClientDisposeException":_ConsoleHelper.default.log(e.message),e.logout&&(window.location.href="index.html");break;case"SystemException":case"AuthorizationException":case"OpenDBConnectionException":_ConsoleHelper.default.error(e.message);break;case"Exception":_Environment.default.__processError(e);break;default:_Environment.default.writeLog(_IUtilityTypes.LoggerLevelEnum.Error,e),_Environment.default.__processError(e)}}}]),o}();exports.default=ErrorHelper;
//# sourceMappingURL=ErrorHelper.js.map
