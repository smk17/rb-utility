"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _ConsoleHelper=_interopRequireDefault(require("./ConsoleHelper")),_StringBuilder=_interopRequireDefault(require("./StringBuilder")),_StringHelper=_interopRequireDefault(require("./StringHelper")),_Environment=_interopRequireDefault(require("./Environment")),_JsonHelper=_interopRequireDefault(require("./JsonHelper")),_Localize=_interopRequireDefault(require("./Localize")),_IUtilityTypes=require("./IUtilityTypes");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var ErrorHelper=function(){function o(){}return o.__printExceptionTo=function(e,r){r.appendLine("异常类型：",e.name).appendLine("异常消息：",e.message),e.stack&&r.appendLine("堆栈信息：").appendLine(e.stack),e.data&&r.appendLine("异常数据：").appendLine(_JsonHelper.default.toJson(e.data)),e.innerException&&(r.append("内部异常："),o.__printExceptionTo(e.innerException,r))},o.__printException=function(e){if("BusinessException"===e.name)return e.message;var r=new _StringBuilder.default;return o.__printExceptionTo(e,r),r.toString()},o._errorArgument=function(e,r,n){var t="Argument"+e+"Exception";return r&&(n+="\n"+_Localize.default.to("参数名：{0}。",r)),o.create(t,n,"",null,{paramName:r})},o._error=function(e,r){return o.create(e+"Exception",r,"")},o.create=function(e,r,n,t,o){var i=new Error;return i.name=e,i.message=r,n&&(i.stack=n),t&&(i.innerException=t),o&&(i.data=o),i},o.argument=function(e,r){return o._errorArgument("",e,r||"值并不在预期的范围内。")},o.argumentNull=function(e,r){return o._errorArgument("Null",e,r||"值不能为null。")},o.argumentOutOfRange=function(e,r,n){var t=n||"值在有效范围之外。";return e&&(t+="\n"+_StringHelper.default.format("参数名：{0}。",e)),null!=r&&(t+="\n"+_StringHelper.default.format("实际值是：{0}。",r)),o.create("ArgumentOutOfRangeException",t,"",null,{paramName:e,actualValue:r})},o.argumentUndefined=function(e,r){return o._errorArgument("Undefined",e,r||"值不能为未定义。")},o.format=function(e){return o._error("Format",e||"一个无效的格式。")},o.invalidOperation=function(e){return o._error("InvalidOperation",e||"一个无效的操作。")},o.notImplemented=function(e){return o._error("NotImplemented",e||"当前方法或操作没有实现。")},o.notSupported=function(e){return o._error("NotSupported",e||"不支持当前操作。")},o.parameterCount=function(e){return o._error("ParameterCount",e||"参数个数不匹配。")},o.configException=function(e){return o._error("Config",e||"配置异常。")},o.systemException=function(e){return o._error("System",e||"操作失败，请联系系统管理员！")},o.userException=function(e){return o._error("User",e)},o.passException=function(){return o._error("Pass","用于终止后面的操作。")},o.isPassException=function(e){return e&&e.constructor===Error&&"PassException"===e.name},o.disposeThrowPass=function(e){if("PassException"===e.name)throw e;throw o.dispose(e),o.passException()},o.dispose=function(e){if(e)switch(e.name){case"PassException":return;case"BusinessException":case"UserException":switch(e.type){case"ReferencedDataException":var r=e.referencedDatas;5<r.length&&(r[5]="等"),_ConsoleHelper.default.error(e.message+"-被使用的数据："+r.join("，"));break;default:_ConsoleHelper.default.log(e.message)}break;case"ClientDisposeException":_ConsoleHelper.default.log(e.message),e.logout&&(window.location.href="index.html");break;case"SystemException":case"AuthorizationException":case"OpenDBConnectionException":_ConsoleHelper.default.error(e.message);break;case"Exception":_Environment.default.__processError(e);break;default:_Environment.default.writeLog(_IUtilityTypes.LoggerLevelEnum.Error,e),_Environment.default.__processError(e)}},o}(),_default=ErrorHelper;exports.default=_default;
//# sourceMappingURL=ErrorHelper.js.map
