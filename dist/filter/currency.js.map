{"version":3,"sources":["filter/currency.js"],"names":["_Formula","_interopRequireDefault","require","_currencyFormulas","Formula","_weightFormulas","currency","value","params","_currency","decimals","unit","isFinite","_unit","calc","weight","parseFloat","undefined","Math","abs","toFixed","stringified","slice","i","_int","length","head","replace"],"mappings":"2FAAA,IAAAA,SAAAC,uBAAAC,QAAA,uFACA,IAAIC,kBAAoB,IAAIC,SAAAA,QAAQ,kDAAmD,GACnFC,gBAAkB,IAAID,SAAAA,QAAQ,0BAA2B,GAO7D,SAASE,SAASC,EAAOC,QACN,IAAXA,IAAqBA,EAAS,IATlCL,IAAAA,EAAAA,EAAoBM,UAAIL,EAAQI,EAAAE,SAAAC,EAAAH,EAAAG,KAEpC,GASIJ,EAAQA,GAAS,EAVjBF,EAAAA,WAAkBE,IACtBK,SAAAL,KAAAA,GAAA,IAAAA,EAYQ,MAAO,GAEX,IADAG,EAAuB,MAAZA,EAAmBA,EAAW,GAC1B,EACX,OAAOH,EACX,IAAIM,EAAQ,GACZN,EAAQJ,kBAAkBW,KAAK,CAC3BR,SAAUC,EAZlBG,SAAkBH,MACiBI,IAAQ,MAAAJ,GAgB/BA,EAAQF,gBAAgBS,KAAK,CAfxBC,OAASR,EAAoBI,KAAGH,MACrCD,EAAR,EACQS,EAAU,KAGK,KAAZN,IACPA,EACAL,gBAAAS,KAAA,CACJC,OAAAR,EACQJ,KAAAA,MAEIO,EAAE,EAFdG,EAAA,MAKIJ,EAAA,MAASA,QAAkBQ,IAAAR,EAAAA,EAAA,IAEnBM,IAAAA,EADyBG,KAAAC,IAAAZ,GAAAa,QAAAV,GAEzBC,EAAMD,EAAQW,EAAAC,MAAA,GAAA,EAAAZ,GAAAW,EAFlBE,EAAAC,EAAAC,OAAA,EAIAf,EAAA,EAAQa,EAARC,EAAAF,MAAA,EAAAC,IAAA,EAAAC,EAAAC,OAAA,IAAA,IAAA,GACAZ,EAAAH,EAAAW,EAAAC,OAAA,EAAAZ,GAAA,GAIIK,OAFCR,EAAK,EAAI,IAAb,IAGGI,EAFJe,EAIAhB,EAAAA,MAAAa,GAAAI,QAJQtB,iBAIR,OACAQ,EACHA,eAkBMP","file":"currency.js","sourcesContent":["import Formula from \"../Formula\";\nvar _currencyFormulas = new Formula(\"(data.currency * data.decimals) / data.decimals\", 2);\nvar _weightFormulas = new Formula(\"data.weight / data.unit\", 2);\n/**\n * 数据格式化成金额\n * @param value\n * @param _currency\n * @param decimals\n */\nfunction currency(value, params) {\n    if (params === void 0) { params = {}; }\n    var _currency = params._currency, decimals = params.decimals, unit = params.unit;\n    value = value || 0;\n    value = parseFloat(value);\n    if (!isFinite(value) || (!value && value !== 0))\n        return \"\";\n    decimals = decimals != null ? decimals : 2;\n    if (decimals < 0)\n        return value;\n    var _unit = \"\";\n    value = _currencyFormulas.calc({\n        currency: value,\n        decimals: 100\n    });\n    if (!!unit) {\n        if (value >= 100000000000) {\n            value = _weightFormulas.calc({\n                weight: value,\n                unit: 10000 * 10000\n            });\n            decimals = 0;\n            _unit = \"亿\";\n        }\n        else if (value >= 10000000) {\n            value = _weightFormulas.calc({\n                weight: value,\n                unit: 10000\n            });\n            decimals = 0;\n            _unit = \"万\";\n        }\n    }\n    _currency = _currency != null || _currency !== undefined ? _currency : \"￥\";\n    // value = (Math.ceil(value * 100)) / 100\n    var stringified = Math.abs(value).toFixed(decimals);\n    var _int = decimals ? stringified.slice(0, -1 - decimals) : stringified;\n    var i = _int.length % 3;\n    var head = i > 0 ? _int.slice(0, i) + (_int.length > 3 ? \",\" : \"\") : \"\";\n    var _float = decimals ? stringified.slice(-1 - decimals) : \"\";\n    var sign = value < 0 ? \"-\" : \"\";\n    var digitsRE = /(\\d{3})(?=\\d)/g;\n    return (sign +\n        _currency +\n        head +\n        _int.slice(i).replace(digitsRE, \"$1,\") +\n        _float +\n        _unit);\n}\nexport default currency;\n"]}